<!DOCTYPE HTML>
<html>
	<head>
		<title>Unipants Golfing Language Interpreter</title>
		<script src="ugl.js"></script>
		<link rel="stylesheet" href="style.css">
	</head>
	<body onload="loadExamples(document.getElementById('examples'));
		document.getElementById('strict_mode').checked=localStorage.getItem('strict') === '0' ? false : true;
		loadPermalink(document.getElementById('code'), document.getElementById('input'))">
		<button onclick="document.getElementById('popup-border').style.display='block'">Help</button>
		<h3>Code</h3>
		<div>
			<select id="examples" onchange="if(event.target.value){
				let parts=event.target.value.split('|');
				document.getElementById('code').value=parts[0];
				document.getElementById('input').value=parts[1];
			}"></select>
		</div>
		<div><span id="bytecount">0</span> bytes</div>
		<textarea id="code" oninput="document.getElementById('bytecount').innerHTML=event.target.value.length"></textarea>
		<h3>Input</h3>
		<textarea id="input"></textarea>
		<button onclick="document.getElementById('output').value='';
			[document.getElementById('sanitized').value, document.getElementById('output').value]=ugl(document.getElementById('code').value, document.getElementById('input').value);
			document.getElementById('sanitized_bytecount').innerHTML = document.getElementById('sanitized').value.length;
			document.getElementById('permalink').href = document.getElementById('_permalink').value = getPermalink(document.getElementById('code').value, document.getElementById('input').value);
			">Run!</button>
		<div>
			Strict mode: 
			<input id="strict_mode" type="checkbox" onchange="localStorage.setItem('strict', event.target.checked ? '1' : '0');Strict=event.target.checked"></div>
		</div>
		<div>
			Maximum number of iterations: 
			<input oninput="maxi=document.getElementById('maxi_num').value=event.target.value" id="maxi_range" type="range" min="0" max="100000" value="1000">
			<input oninput="maxi=document.getElementById('maxi_range').value=event.target.value" id="maxi_num" type="number" min="0" max="100000" value="1000">
		</div>
		<div><h3 class="inline-flex">Sanitized</h3><span class="copy" onclick="copy(document.getElementById('sanitized'))"></span></div>
		<div><span id="sanitized_bytecount">0</span> bytes</div>
		<textarea id="sanitized" readonly="true"></textarea>
		<div><h3 class="inline-flex"><a id="permalink" href="">Permalink</a></h3><span class="copy" onclick="copy(document.getElementById('_permalink'))"></span><textarea id="_permalink" style="height: 1px; width: 1px;"></textarea></div>
		<div><h3 class="inline-flex">Output</h3><span class="copy" onclick="copy(document.getElementById('output'))"></span></div>
		<textarea id="output" readonly="true"></textarea>
		<div id="popup-border" style="display:none">
			<div id="popup">
				<button class="close" onclick="document.getElementById('popup-border').style.display='none'">x</button>
				<h3>Instructions</h3>
				<h4>I/O</h4>
				i - input an integer into the stack<br/>
				I - input a character into the stack<br/>
				o - pop the top of stack and output an integer<br/>
				O - pop the top of stack and output a character
				<h4>Push/Pop</h4>
				c - push a 0 into the stack<br/>
				_ - DROP the top of stack<br/>
				= - pops two items and pushes either 1 if they are equal or 0 if they are not
				<h4>Increment/Decrement</h4>
				u - increment the top of stack<br/>
				d - decrement the top of stack
				<h4>Arithmetic</h4>
				+ - add the top of stack and second-to-top of stack<br/>
				- - subtract from the top of stack the second-to-top of stack<br/>
				* - multiply the top of stack and second-to-top of stack<br/>
				/ - divmod - divide the top of stack by second-to-top of stack, push the quotient and remainder (quotient to top of stack)
				<h4>Stack Primitives</h4>
				$ - DUP - push a copy of the top of stack (1 2 ==> 1 2 2)<br/>
				% - SWAP - swap the top of stack and second-to-top of stack (1 2 3 ==> 1 3 2)<br/>
				@ - ROLL - roll the stack upward (1 2 3 4 ==> 4 1 2 3)<br/>
				^ - PICK - push a copy of the second-to-top of stack (1 2 ==> 1 2 1)
				<h4>Nested Structures</h4>
				? - if: the nested structure runs if and only if the top of stack is nonzero<br/>
				l - while: the nested structure runs while the top of stack is nonzero<br/>
				: - ends both nested structures
				<h4>Registers</h4>
				r - push the value in current register to stack<br/>
				R - pop top of stack to the value in current register<br/>
				s - set current register number to number popped off stack
				<h4>Example</h4>
				Counts down from n to 1<br/>
				<br/>
				<pre>
				il$od:
				i      - input
				 l   : - while loop
				  $    - dup
				   o   - output
				    d  - decrement
				</pre>
			</div>
		</div>
	</body>
</html>
